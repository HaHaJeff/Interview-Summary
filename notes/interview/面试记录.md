面经记录

[TOC]

## 腾讯

### 18.4.2 鸡哥

#### 一面

- 1.TCP和UDP的区别
- 2.使用TCP，循环调用3次write，每次write一个字节，在接收方要读几次；UDP接收方是几次
- 3.TCP已经提供了数据校验了，为什么网上下载一些文件还需要md5之类的来检测数据
  - [解答](https://blog.csdn.net/bjrxyz/article/category/6895078)
- 4.互斥的方式
- 5.信号量和互斥量的区别，结合消费者问题说一下
  - 互斥量加锁解锁的是用一个进程，信号量可以不同
- 6.自旋锁和互斥量的区别（自旋锁和互斥量是忙等与阻塞的区别）
- 7.C++，析构函数为什么要用虚函数，构造函数内为什么不要调用虚函数
- 8.C++的new delete 和c的malloc free
- 9.跳台阶
- 10.最大公约数
- 11.智力题：1瓶毒药999瓶无毒，10只青蛙
- 12.linux的ps命令

#### 二面

- 1.C++虚函数表的设计
- 2.memcpy的实现
- 3.n的阶乘（考虑溢出）
- 4.跳台阶
- 5.4亿个qq号排序
- 6.一栋楼，有136层，给你两个弹珠，测出弹珠在第几层刚好摔破，弹珠摔破后，不可再使用
  - x=16

### 2018.4.9 波哥

#### 一面

- 项目有什么特色，难点，怎么解决的，学到了什么

#### 二面

- 1.内存泄露
- 2.C++程序运行过程中crash掉时，怎么去分析错误
- 3.项目某些功能的具体实现方式

### 2018.4.10 波哥 天美

#### 一面

- 1.C++如何实现多态
- 2.C++如何防止类被继承（除了final）
  - 构造函数声明为私有
  - 虚继承一个构造函数声明为私有的基类，并且在基类中将派生类设为友元
- 3.C++中map如何实现的，如何实现平衡的
  - 红黑树
- 4.select和poll的区别
  - select监听fd受限，使用的是内核设定的long数组
  - poll监听fd不受限，使用的是pollfd的动态数组
- 5.内核文件系统中索引节点什么时候被删除
- 6.洗牌问题：如何均匀洗牌
- 7.100层楼摔砖石
- 8.几十万个任务查找
- 9.自旋锁是如何实现的
- 10.TCP和UDP的区别
- 11.TCP为什么要四次挥手
- 12.TIME_WAIT的作用
- 13.UDP发送1M数据怎么发送
- 14.进程和线程区别
- 15.进程间通信的方法和特点
- 16.容器的i/o是如何实现隔离的


### 2018.4.15 鸡哥 现场

#### 一面

- 1.进程与线程
  - 资源
  - 调度
  - 通信
  - 健壮
- 2.拥塞控制
  - 慢启动
  - 拥塞避免
  - 快速恢复
- 3.a^n，求最优解
  - leetcode50 Pow(x, n) 二进制
- 4.Linux查看进程某个端口的进程
  - `lsof -i`：列出当前系统打开文件的工具
  - `lsof -i:端口号`：用于查看某一端口的占用情况，比如查看22号端口使用情况，`lsof -i:22`
  - `netstat -tunlp`：用于显示tcp，udp的端口和进程等相关情
  - `netstat -tunlp|grep 端口号`：用于查看指定端口号的进程情况，如查看22端口的情况，netstat -tunlp|grep 22
- 5.Linux如何查看进程的内存使用情况
  - /proc/meminfo：列出了所有你想了解的内存的使用情况
  - atop命令是一个终端环境的监控命令。它显示的是各种系统资源（CPU, memory, network, I/O, kernel）的综合，并且在高负载的情况下进行了彩色标注
  - free命令是一个快速查看内存使用情况的方法，它是对 /proc/meminfo 收集到的信息的一个概述
- 6.Linux如何查看进程的网络I/O
  - iptraf：它可以生成多种网络统计信息包括：TCP信息、UDP数量、ICMP和OSPF信息、以太网负载信息、节点状态、IP校验错误等
- 7.C++多态
  - 静态多态：重载、模板
  - 动态多态：继承、虚函数、指向派生类的基类指针
- 8.有了解或者接触过一些开源项目吗
- 9.项目，10分钟左右

### 2018.4.15 丁丁 现场 游戏岗

- 1.vector push_back要注意的（内存拷贝相关）
- 2.多态
- 3.c++ 和 ++c 哪个不能作为左值
- 4.判断是否是凹多边形
- 5.对齐计算，注意 #pragma pack
- 6.如何判断内存泄漏、内存泄漏防范和检测
- 7.sort的实现
- 8.vector/map等 erase要注意的
- 9.main函数开始之前有哪些工作
  - 在调用main前先调用一个特殊的启动例程。可执行程序文件将次启动例程指定为程序的起始地址---由连接编辑器设置的，而连接编辑器由C编译器调用。
  - 启动例程从内核读取命令行参数和环境变量值，然后为上述方式调用main函数做好安排
- 10.mutex 多线程 lock
- 11.c++11 有哪些
  - nullptr 常量
  - constexpr 变量，声明为constexpr的变量一定是一个常量，而且必须用常量表达式来初始化 
  - 使用类型别名可以使复杂的类型名字变得更简单明了 （using）
  - auto
  - decltype
  - 范围 for 语句
- 12.RAII
  - RAII全称是“Resource Acquisition is Initialization”，直译过来是“资源获取即初始化”，也就是说在构造函数中申请分配资源，在析构函数中释放资源
  - 由对象来管理资源
- 13.智能指针
- 14.虚函数表
- 15.快排优化（随机选取，基本有序时等）
  - 首、中、尾三值的中位数
  - 元素个数低于阈值时，使用插入排序
- 16.reserve 和 resize
  - reserve调整容量
  - resize调整元素个数
- 17.`vector<bool>` 中bool的表现形式
  - [避免使用vector<bool>](http://www.baidu.com/link?url=19NJjbbgzmF3GJ-xZMZGnxyoeiSDh2XwmeNByANMf3-bUoGK9N23ycyHDkkB8Ctvz7XfeSVvkYAOTpqVK9P0Rq&wd=&eqid=cb3f9274000865f7000000035b38c5ee)
  - [不使用vector<bool>的原因和替代方法](https://blog.csdn.net/u013249689/article/details/25297657)
- 18.继承中类构造和析构的顺序，虚函数指针等的设置时间
  - 在初始化列表之后，构造函数之前？
- 19.写过的最优秀的一些代码
- 20.

```c++
/*
D的内存布局
D* pd=new D; B2* pb2 = pd;  pb2==pd? 
*/
Class D: public B1, public B2 {};  
```

- 21.智力题，智力题：打牌最优解

### 2018.4.15 志哥 现场 腾讯

#### 一面

- 1.int main(int argc ,char **argc)参数的意思
  - argc是命令行总的参数个数
  - argv[]是argc个参数，其中第0个参数是程序的全名（绝对路径）。之后的参数是命令行后面跟的用户输入的参数
- 2.int f() const
  - 成员const函数，只能调用const成员变量，mutable除外
  - const对象只能调用const函数
- 3.static int f()，举个使用static的例子
  - static在面向过程中：
  - static在面向对象中：
- 4.malloc 与 new
- 5.虚函数表
- 6.进程通信的方式
- 7.VM与Docker的区别


### 2018.4.15 波哥 现场 微信

#### 一面

- 1.什么是多态
  - 多态指同一个实体同时具有多种形式。它是面向对象程序设计（OOP）的一个重要特征
  - 在面向对象语言中，接口的多种不同的实现方式即为多态
  - 多态是具有表现多种形态的能力的特征，在OO中是指，语言具有根据对象的类型以不同方式处理之，特别是重载方法和继承类这种形式的能力。多态被认为是面向对象语言的必备特性
- 2.虚函数调用过程
- 3.进程间通信方式
- 4.有哪几种同步方式
  - 信号量
  - 互斥量
  - 自旋锁
- 5.什么是协程

[协程概念，原理](http://cnodejs.org/topic/58ddd7a303d476b42d34c911)

协程是一个无优先级的子程序调度组件，允许子程序在特点的地方挂起恢复。

线程包含于进程，协程包含于线程。只要内存足够，一个线程中可以有任意多个协程，但某一时刻只能有一个协程在运行，多个协程分享该线程分配到的计算机资源

协程是在线程之上由“用户”构建的并发单元，对OS来说无感知，协程的切换由用户自己管理和调度。

为什么要有协程：协程允许我们写同步代码的逻辑，却做着异步的事，避免了回调嵌套，使得代码逻辑清晰。协程是追求极限性能和优美的代码结构的产物。

- 6.多路转接（多路复用）有哪些方式，各有什么优缺点
  - select
  - poll
  - epoll
- 7.手写split函数

```c++
typedef string::size_type string_size;

void addStr(const string &s,vector<string>& result,string_size i, string_size j)
{
	int allEmpty = true;
	for (string_size x = i; x < j; x++)
	{
		if (s[x] != ' ')
		{
			allEmpty = false;
			break;
		}
	}
	if (!allEmpty)
		result.push_back(s.substr(i, j - i));
}

vector<string> split1(const string &s, const char seperator) {
	vector<string> result;
	string_size i = 0;
	string_size j = 0;
	while (j < s.size()&&s[j]==' ')
	{
		i++;
		j++;
	}
	j++;
	while(j < s.size())
	{
		char temp = s[j];
		if ( temp  == seperator)
		{
			addStr(s, result, i, j);
			i = ++j;
		}
		else
			++j;
	}
	addStr(s, result, i, j);
	return result;
}

int main() {
	string s = "he  llo boy, I am a student, come from shangdong";
	vector<string> res1 = split1(s, ' ');
	for (auto a : res1) {
		cout << a << endl;
	}
	system("pause");
	return 0;
}
```

### 2018.4.15 胡蝶 腾讯云

#### 一面

- 1.B树、B+树、红黑树
  - 通常B+树用于数据库索引，而B树则常用于文件索引 
  - B+树的数据都存储在叶子结点中，B树其分支结点同样存储着数据 
  - [B树和B+树的总结](https://www.cnblogs.com/George1994/p/7008732.html)
- 2.socket、read函数各个返回值代表什么意思
  - socket（正确：fd；错误：-1）
  - read（正确，读到的字节数；读到文件尾，0；错误，-1）
- 3.为什么链路层有MTU
  - 各种为网络对数据帧都有一个大小限制，链路层不同协议对最大帧长度做了限制，这个值就是MTU，以太网1500
  - 路径MTU：从A到B可能经过不同的网络，其中最小的MTU就是路径MTU
- 4.进程和线程
- 5.分页和分段
  - 区别 《计算机操作系统》P138
- 6.文件系统（Windows ntfs，Linux ext2、ext3、ext4）
- 7.快排、冒泡、插入排序原理
- 8.三次握手、close_wait状态和time_wait状态的意义
- 9.浏览器中输入url按entry后发生的事情
- 10.编译原理了解多少
- 11.进程间通信方式有哪些？怎么理解临界区
- 12.linux操作系统怎么设置网络的一些参数
  - ifconfig
  - /etc/network/interfaces
- 13.进程上下文怎么切换[Linux进程上下文切换过程](https://blog.csdn.net/gatieme/article/details/51872659)
  - 挂起一个进程，将这个进程在 CPU 中的状态（上下文）存储于内存中的PCB
  - 在内存中检索下一个进程的上下文并将其在 CPU 的寄存器中恢复
  - 跳转到程序计数器所指向的位置（即跳转到进程被中断时的代码行），以恢复该进程

### 2018.4.16 我

#### 一面

- 1.双向链表结构体
- 2.双向链表的删除
- 3.TCP首部
- 4.三次握手（画图）
- 5.socket的创建有几种
- 6.Docker的基本命令
- 7.Docker的优势
  - Docker Hub
  - 镜像
  - 跨平台
- 8.还有什么别的容器技术
  - LXC
  - Rocket
  - Univernel
- 9.容器怎么调度的
  - K8S，具体不了解
- 10.Go语言的多线程（goroutine）


[Go语言并发与并行学习笔记(一)](https://blog.csdn.net/kjfcpua/article/details/18265441)

```go
var complete chan int = make(chan int)

func loop(){
    for i:=0; i < 10; i++{
        fmt.Print("%d",i)
    }
    complete <- 0 //执行完毕了，发个消息
}

func main(){
    go loop()
    <- complete //直到线程跑完，取到消息，main在此阻塞住
}
```

- 11.哈希如何解决冲突
  - 开散列法：拉链
  - 闭散列法：开地址法
    - 线性探查法`hi=(h(key)+i) mod M`
    - 二次探查法
      - `h2i-1(key)=(h(key)+i^2) mod M`
      - `h2i(key)=(h(key)-i^2) mod M`
    - 双散列法
      - `Hi=(h1(key)+i*k2(key)) mod M`
- 12.哈希的应用
  - hash_map（unorderd_map）
  - hash_set（unordered_set）
- 13.STL容器有哪些
  - vector
  - list
  - deque
  - map
  - multimap
  - set
  - multiset
- 14.看过什么技术书籍


#### 二面

- 1.微信如何连接服务器，过程是怎样的
  -  DNS解析，获得最近的服务器节点
  - 查看最近节点是否有请求内容，如果没有，会到源节点去找，以方便下一次使用（这就是CDN的作用）
- 2.朋友圈打开一个照片的过程是怎样的
  - http+短连接
- 3.内容分发网络
  - [内容分发网络](https://cloud.tencent.com/document/product/228/2939)

#### HR面

- 1.家庭情况
- 2.对你所要去的部门了解么
- 3.除了学习之外做了什么事情
- 4.去过深圳么
- 5.还有什么要问的

## 头条

### 2018.7.9 志哥 头条

- 1.docker项目，问了为啥docker用严格匹配镜像模式，你的会不会有什么问题
  - docker的方法主要是为了实现的简单
  - 由于只对“进行数据下载”的命令进行细粒度匹配，目前的测试来看还是没有问题的
- 2.云端融合项目
- 3.docker的原理
  - crgoup+namespace+rootfs+容器引擎
  - clone命令、pivot_root命令、exec命令
- 4.docker能运行Windows吗？从原理上分析为什么虚拟机可以，容器不可以
  - docker+virtualbox+windows好像是可行的
  - 直接跑是不能跑的，Docker并不是虚拟机，他和原系统共用底层的，所以Linux上装的Docker不能装Windows应用程序的
  - 明确来说 docker 并不是虚拟机，而是容器，Container。这和虚拟机的概念还是不一样的。虚拟机主要是抽象出硬件支持操作系统运行，而容器本质上是基于应用的。最简单的例子，沙箱，你可以理解docker像沙箱一样实现应用于主机的隔离。 
- 5.手写堆排序
- 6.实现strlen，不能用变量，不能改变str
- 7.TCP滑动窗口，拥塞控制
- 8.一堆数据根据 ID取模，分配到集群中，当集群的节点个数从A变为B，有多少数据会移动
- 9.你为什么选择头条