王道程序员求职宝典-第4篇 其他计算机相关基础



# 第2章 设计模式

## 2.1 单例模式

- 实现1

```c++
class Singleton {
	static Singleton s;
	int i;
	Singleton(int x) : i(x) {};
	Singleton& operator=(Singleton&); //不允许赋值
	Singleton(const Singleton&); //不允许拷贝
public:
	static Singleton& instance() { return s; };
	int getValue() { return i;  }
	void setValue(int x) { i = x; };
};

Singleton Singleton::s(27);

int main(void)
{
	
	Singleton& s = Singleton::instance();
	cout << s.getValue() << endl;
	Singleton& s2 = Singleton::instance();
	s2.setValue(9);
	cout << s.getValue() << endl;
	system("pause");
	return 0;
}
```

- 实现2

```c++
class Singleton {
	int i;
	Singleton(int x) : i(x) {};
	Singleton& operator=(Singleton&); //不允许赋值
	Singleton(const Singleton&); //不允许拷贝
public:
	static Singleton& instance() { 
		static Singleton s(27);
		return s;
	};
	int getValue() { return i;  }
	void setValue(int x) { i = x; };
};

int main(void)
{
	
	Singleton& s = Singleton::instance();
	cout << s.getValue() << endl;
	Singleton& s2 = Singleton::instance();
	s2.setValue(9);
	cout << s.getValue() << endl;
	system("pause");
	return 0;
}
```

# 第3章 数学基础

## 3.1 进制及应用

- 1.16进制转10进制
- 2.8瓶毒酒，需要几个人（3个，2^3=8）
- 3.2012瓶毒矿泉水，需要几只老鼠（11只，2^11=2048 > 2012）
- 4.5只老鼠可以测几瓶毒药（31瓶，00000由于没喝，无法测出）
- 5.100个门排成一排，开始时全为关（操作表示如果原来为关，则将其变为开，如果为开，则变为关）
  - 第1次，操作门1、2、3……100
  - 第n次，操作门n、2n、3n……100
  - ...
  - 第100次，操作门100
  - 问：最后哪些门是关的？
  - 答：门最后的开关跟门号有几个因子有关，因子数为奇则为开，因子数为偶数则为关。只有一个数是某个数的平方，则才会出现奇数个因子，该门的最终状态是关
  - 例如36的因子有(1,36)、(2,18)、(3,12)、(4,9)、(6,6)，由于6只能贡献1个因子，因此36只有奇数个因子
- 6.一百个灯泡排成一排，第一轮将所有灯泡打开（能被1整数）；第二轮每隔一个灯泡关掉一个（能被2整除）。即排在偶数的灯泡被关掉，第三轮每隔两个灯泡（能被3整除），将开着的灯泡关掉，关掉的灯泡打开。依次类推，第100轮结束的时候，还有几盏灯泡亮着 
  - 思路与上一题相似
  - 对于每盏灯，拉动的次数是奇数时，灯就是亮着的，拉动的次数是偶数时，灯就是关着的
  - 因此，因子数为奇数时，灯是亮的，因此为1、4、9、16、25、36、49、64、81、100
- 7.工人为你工作7天，每天回报是一段金条。你有一整条金条，可以分段。你必须在每天结束时给工作金条，并且金条只可以被弄断两次，应该怎么做
  - 弄为1/7、2/7和4/7
  - 注意：1、2、4的选择不是巧合，它们分别是2^0、2^1、2^2
- 8.房间有3个灯，房间外有3个开关，如何判断哪个开关对应哪个灯
  - 要3个状态需要判断，因此需要一个至少3进制，那么加入灯泡是否为热后，变为4进制（热、不热、亮、不亮），则可以判断
  - 答：1号开关开半个小时，关掉。打开2号开关，打开房门查看
  - 热但不亮的为1号灯、亮的为2号灯、不亮不热的为3号灯
- 9.假设在n进制下，下面的等式成立，n的值是（），567*456=150216 
  - A、9     B、10   C、12   D、18
  - 答案为D
  - [参考链接](http://blog.sina.com.cn/s/blog_17855526a0102x7ar.html)
- 10.1,2,……499,500共500个数，每次取奇数位丢掉，然后再取剩下的数的奇数位丢掉，最后剩下的数是。
  - 答：由于从1开始，因此丢掉的第一批数是二进制最低位为1的数，第二次丢掉的是二进制中有起第二个为1的数，以此类推，最后被丢掉的数一定是不超过500的并且二进制位中低位全为0的数，因此是256
  - [参考链接](https://www.nowcoder.com/questionTerminal/196141ecd6eb401da3111748d30e9141?source=relative)

## 3.2 概率

- 1.四个人，至少两人是同一生肖的概率是多少
  - 答：`1-12*11*10*9/12*12*12*12`
- 2.3个门，其中1个有奖品。当你选定1个门后，主持人会打开一个没有奖品的门，让你重新选择。此时，如果你坚持选择，中奖概率为（1/3）。如果你交换选择，则中奖概率为（2/3）
- 3.在区间[-2，2]里任取两个实数，它们的和大于1的概率是（9/32）
  - 画坐标系解决
- 4.中国人血型分布：A：30%；B：20%；O：40%；AB：10%。则人选一批中国人作为调用对象，希望他们中至少有一个是B型血的可能性不低于90%，则至少需要多少人
  - 假设至少N个人，全部不是B的概率为(80%)^N，则至少有一个是B的概率为1-(80%)^N，因此N至少等于11
- 5.有两个孩子，性别未知。已知其中一个是女孩的情况下，另一个孩子也是女孩的概率
  - 样本空间：（男男）（男女）（女男）（女女）
  - A=（已知其中一个是女孩）=（女女）（男女）（女男）
  - B=（另一个也是女孩）=（女女）
  - 因此P(B/A)=P(AB)/P(A) = (1/4) / (3/4) = 1/3
- 6.n把钥匙，一个宝箱，有一把钥匙能打开
  - 恰好第k次（1<=k<=n）打开宝箱的概率是多少
    - 第1次没有打开的概率：1-1/n
    - 第2次没有打开的概率：(1-1/n)*(1-1/(n-1))
    - ...
    - 第k次恰好打开的概率：`(1-1/n)*(1-1/(n-1))*(1-1/(n-2))*...*(1-1/(n-k+2))*(1/(n-k+1))=1/n`
  - 平均需要尝试多少次（求期望值）
    - 由于每次打开宝箱的概率都是1/n，则期望为：
    - `1*(1/n)+2*(1/n)+3*(1/n)+……+n*(1/n)=(n+1)/2`
- 7.对用户请求的query进行随机选择m个，请给出一个方案，使得每个query被选中的概率相等。注意：不到最后一刻，不知道用户的总请求量
  - 前m个query直接存储，从m+i（i=1,2,3……）个query开始，以m/(m+i)（i=1,2,3……）的概率选择这个query，并在已经存储的m个query中随机选择一个进行替换
- 8.假如有一个rand5能等概率生成1~5之间的整数，如何利用rand5实现一个rand7
  - 思想：构造一个更大的范围，使得范围里每一个值被生成的概率是一样的，而且这个范围是7的倍数
  - 生成一个均匀分布的0、5、10、15、20的数A，再生成一个均匀分布的0、1、2、3、4的数B，A+B会产生一个0~24的数，且每个数的概率是一样的。然后只取1~21这段，对7取模再加1就得到rand7

```c++
int rand7()
{
    while(true)
    {
        int A = 5 * (rand5()-1);
        int B = rand5() - 1;
        int C = A + B;
        if(C<21) return (C % 7) + 1;
    }
}
```

- 9.直线分平面公式：n条直线最多能把平面分成1+1+2+3+……+n个部分,即最多能把平面分成(n(n+1)+2)/2个部分 

